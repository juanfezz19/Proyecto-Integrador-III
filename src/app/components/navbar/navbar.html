<!-- navbar.html -->
<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <div class="navbar-brand">
      <a routerLink="/" class="logo">
        <span class="logo-icon">⚡</span>
        <span class="logo-text">Proyecto III</span>
      </a>
    </div>

    <!-- Menu Toggle (Mobile) -->
    <button class="navbar-toggle" (click)="toggleMenu()" aria-label="Toggle menu">
      <span class="hamburger"></span>
    </button>

    <!-- Navigation Links -->
    <div class="navbar-menu" [class.active]="isMenuOpen" [class.search-active]="isSearchOpen">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a routerLink="/inicio" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link" (click)="closeMenu()">
            Inicio
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/productos" routerLinkActive="active" class="nav-link" (click)="closeMenu()">
            Productos
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/servicios" routerLinkActive="active" class="nav-link" (click)="closeMenu()">
            Servicios
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/ofertas" routerLinkActive="active" class="nav-link" (click)="closeMenu()">
            <span class="badge-small">Nuevo</span>
            Ofertas
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/contacto" routerLinkActive="active" class="nav-link" (click)="closeMenu()">
            Contacto
          </a>
        </li>
      </ul>
    </div>

    <!-- Right Side Actions -->
    <div class="navbar-actions">
      <!-- Search Container -->
      <div class="search-container" [class.active]="isSearchOpen">
        <div class="search-wrapper">
          <input 
            type="text" 
            id="search-input"
            class="search-input"
            [(ngModel)]="searchQuery"
            (keydown)="onSearchKeyPress($event)"
            placeholder="Buscar productos..."
            [class.active]="isSearchOpen">
          <button 
            *ngIf="isSearchOpen && searchQuery" 
            class="search-submit-btn"
            (click)="performSearch()"
            type="button"
            aria-label="Buscar">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>
        <button 
          class="action-btn search-toggle-btn" 
          (click)="toggleSearch()"
          type="button"
          [class.active]="isSearchOpen"
          aria-label="Buscar">
          <svg *ngIf="!isSearchOpen" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <svg *ngIf="isSearchOpen" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <!-- Cart -->
      <a routerLink="/carrito" class="action-btn cart-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span class="cart-count" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
      </a>

      <!-- User -->
      <button 
        class="action-btn user-btn" 
        (click)="onUserButtonClick()" 
        type="button"
        [title]="currentUser ? 'Cerrar sesión' : 'Iniciar sesión'" 
        aria-label="Usuario">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span *ngIf="currentUser" class="user-indicator"></span>
      </button>
    </div>
  </div>
</nav>